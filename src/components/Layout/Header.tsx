import { Link, NavLink } from "react-router-dom";
import styles from "./Header.module.scss";
import { useEffect, useState } from "react";

function Header() {
  const [showHeader, setShowHeader] = useState(true);
  const [lastScrollY, setLastScrollY] = useState(0);

  useEffect(() => {
    const handleScroll = () => {
      const currentScrollY = window.scrollY;
      if (currentScrollY > lastScrollY && currentScrollY > 100) {
        setShowHeader(false);
      } else {
        setShowHeader(true);
      }
      setLastScrollY(currentScrollY);
    };

    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, [lastScrollY]);

  return (
    <header
      className={`globalPadding ${styles.headerContainer} ${
        showHeader ? styles.visible : styles.hidden
      }`}
    >
      <div className={styles.logoContainer}>
        <Link to="/">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            version="1.0"
            width="64.000000pt"
            height="64.000000pt"
            viewBox="0 0 1024.000000 1024.000000"
            preserveAspectRatio="xMidYMid meet"
          >
            <g
              transform="translate(0.000000,1024.000000) scale(0.100000,-0.100000)"
              fill="#000000"
              stroke="none"
            >
              <path d="M3492 6680 c-76 -36 -170 -126 -232 -220 -100 -155 -217 -445 -482 -1195 -66 -187 -125 -357 -131 -377 -6 -21 -14 -38 -17 -38 -3 0 -20 204 -38 453 -39 531 -54 681 -86 877 -47 279 -95 382 -205 438 -55 27 -75 32 -135 32 -83 0 -135 -20 -185 -71 -41 -40 -93 -148 -116 -239 -65 -258 -322 -1016 -444 -1314 -88 -214 -228 -449 -334 -563 -82 -87 -129 -113 -220 -122 -66 -5 -73 -8 -85 -34 -11 -22 -11 -39 -2 -80 42 -199 216 -319 395 -272 200 53 380 296 573 775 71 176 333 939 373 1084 6 21 12 36 14 34 2 -2 11 -147 20 -323 42 -851 77 -1122 167 -1312 89 -190 261 -272 416 -200 115 53 179 211 362 897 196 735 377 1199 572 1469 29 40 70 96 90 125 43 58 46 87 18 134 -46 76 -177 95 -288 42z" />
              <path d="M8404 6686 c-42 -18 -69 -59 -88 -131 -20 -76 -57 -185 -196 -570 -61 -170 -132 -368 -156 -438 -140 -405 -249 -652 -339 -772 -109 -145 -261 -273 -397 -334 -153 -69 -331 -68 -406 2 -55 51 -67 92 -66 222 1 147 23 237 92 380 98 202 271 365 386 365 66 0 73 -54 21 -180 -65 -157 -37 -220 100 -221 153 -2 291 148 303 327 8 129 -39 230 -142 301 -71 49 -143 67 -261 66 -205 -2 -384 -91 -565 -279 -146 -151 -241 -314 -315 -539 -73 -221 -248 -425 -387 -450 -31 -6 -41 -3 -62 19 -34 33 -34 95 -1 211 32 111 54 163 181 428 176 368 188 432 94 511 -44 37 -95 49 -193 45 -132 -6 -160 -34 -207 -207 -33 -123 -85 -255 -107 -274 -22 -18 -263 -117 -263 -108 0 5 12 57 27 117 23 89 27 131 28 238 0 148 -10 177 -75 214 -42 24 -138 28 -203 10 -49 -13 -106 -64 -128 -114 -36 -83 -49 -299 -29 -475 l10 -85 -41 -85 c-88 -184 -215 -340 -313 -386 -63 -29 -95 -30 -129 -4 -73 57 -40 224 124 642 93 235 106 291 78 337 -34 55 -129 83 -208 61 -92 -24 -187 -157 -307 -424 -125 -279 -213 -430 -309 -535 -88 -94 -154 -122 -195 -81 -60 60 29 352 245 805 68 144 85 188 85 227 0 127 -200 210 -338 139 -55 -28 -88 -71 -140 -181 -85 -182 -222 -544 -272 -718 -114 -394 -62 -661 145 -753 65 -29 169 -30 241 -2 74 29 163 93 229 165 56 61 135 173 149 212 10 28 17 15 32 -61 30 -142 101 -248 200 -298 52 -27 69 -30 144 -29 148 1 269 63 420 214 124 123 265 316 380 517 l52 91 76 35 c127 57 182 80 187 76 2 -2 -12 -37 -31 -76 -62 -131 -103 -276 -124 -442 -28 -217 27 -345 171 -399 121 -45 240 -35 363 31 85 45 229 186 296 290 30 47 57 86 60 86 3 1 11 -28 17 -64 6 -36 25 -94 41 -129 75 -159 211 -240 407 -240 146 1 288 49 440 149 87 58 227 188 293 273 l41 53 -6 -133 c-7 -167 7 -227 66 -281 50 -45 98 -60 173 -55 49 4 64 9 88 34 26 25 33 45 50 139 36 201 121 508 165 595 26 51 59 85 74 76 16 -10 38 -94 77 -290 54 -273 101 -385 195 -470 124 -111 298 -118 469 -19 136 79 315 284 439 501 55 96 66 130 57 167 -8 31 -64 60 -98 52 -14 -4 -60 -47 -106 -101 -130 -151 -257 -235 -368 -244 -69 -6 -134 23 -168 75 -42 64 -106 283 -106 363 0 26 9 32 123 89 136 66 232 140 308 235 141 174 174 365 82 467 -66 72 -159 75 -220 6 -15 -18 -57 -84 -93 -147 -52 -93 -84 -134 -161 -212 -89 -90 -104 -100 -223 -158 -70 -34 -130 -60 -133 -56 -3 3 2 24 12 48 9 24 45 122 80 218 77 212 229 606 321 830 67 162 69 167 69 255 0 74 -4 97 -22 132 -27 50 -81 96 -132 112 -51 15 -139 13 -177 -3z" />
              <path d="M6200 6371 c-182 -60 -298 -266 -232 -414 30 -68 85 -101 178 -105 95 -5 158 16 223 74 72 65 105 138 105 235 1 66 -3 81 -27 117 -40 61 -94 93 -164 98 -32 2 -69 0 -83 -5z" />
            </g>
          </svg>
        </Link>
      </div>
      <nav className={styles.navigationContainer}>
        <NavLink className={styles.navLink} to={"/"}>
          News
        </NavLink>
        <NavLink className={styles.navLink} to={"securities"}>
          Securities
        </NavLink>
        <NavLink className={styles.navLink} to={"about"}>
          About
        </NavLink>
      </nav>
    </header>
  );
}

export default Header;
